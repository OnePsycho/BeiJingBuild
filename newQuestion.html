<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>我要提问</title>
		<link rel="stylesheet" href="lib/js/layui/css/layui.css" />
		<link rel="stylesheet" href="css/main.css" />
		<script type="text/javascript" src="lib/js/jquery.js" ></script>
		<script type="text/javascript" src="lib/js/layui/layui.js" ></script>
		<script type="text/javascript" src="js/common.js" ></script>
	</head>
	<style>
		body{
			background: rgba(255,255,255,0);
			padding: 0px;
		}
		.formContainer{
			background: #fff;
			padding: 40px 20px;
			padding-bottom: 20px;
			border-radius: 6px;
			box-shadow: 0 0 12px 1px #dedede;
		}
		.layui-input, .layui-textarea,.layui-layedit{
			width: 80%;
		}
		.layui-layedit body{
			min-height: 150px !important;	
		}
		.layui-form-label{
			padding: 10px;
			font-weight: bolder;
			width: 60px;
		}
		.layui-input-block{
			margin-left: 100px;
		}
		.layui-form-select{
			width: 100%;
		}
		.layui-btn{
			background: rgb(139,22,11);
			border-radius: 100px;
			width: 150px;
			height: 45px;
		}
		.layui-btn-primary{
			color: white;
		}
		.uploadFile{
			width: 120px;
			height: 36px;
			border-radius: 5px;
		}
		.invitePM{
			width: 120px;
			height: 36px;
			border-radius: 5px;
		}
	</style>
	<body>
		<div class="formContainer">
		<form class="layui-form" action="">
		  <div class="layui-form-item">
		    <label class="layui-form-label">问题标题</label>
		    <div class="layui-input-block">
		      <input type="text" name="title" required  lay-verify="required" placeholder="请输入问题的标题" autocomplete="off" class="layui-input">
		    </div>
		  </div>
		  <div class="layui-form-item">
		    <label class="layui-form-label">项目名称</label>
		    <div class="layui-input-block">
		      <input type="text" id="projectName" name="projectName" required  lay-verify="required" placeholder="" autocomplete="off" class="layui-input">
		    </div>
		  </div>
		  <div class="layui-form-item">
		    <label class="layui-form-label">问题分类</label>
		    <div class="layui-input-block">
		      <input type="text" name="title" required  lay-verify="required" placeholder="请输入问题的赏金" autocomplete="off" class="layui-input">
		    </div>
		  </div>
		  <div class="layui-form-item">
		    <label class="layui-form-label">问题赏金</label>
		    <div class="layui-input-block">
		      <input type="text" name="title" required  lay-verify="required" placeholder="请选择问题分类" autocomplete="off" class="layui-input">
		    </div>
		  </div>
		  <div class="layui-form-item">
		    <label class="layui-form-label">内容描述</label>
		    <div class="layui-input-block">
		      <textarea required  lay-verify="required"  id="content" style="display: none;"></textarea>
		    </div>
		  </div>
		  <div class="layui-form-item">
		    <label class="layui-form-label">附件</label>
		    <div class="layui-input-block">
		    	<p>基于O2O模式的线上销售系统</p>
				<button type="button" class="layui-btn uploadFile" id="uploadFile">上传附件</button>
		    </div>
		  </div>
		 
		  <div class="layui-form-item layui-form-text">
		    <label class="layui-form-label">项目经理</label>
		    <div class="layui-input-block">
		      <button type="button" class="layui-btn invitePM" id="invitePM">邀请项目经理</button>
		    </div>
		  </div>
		  <div class="layui-form-item layui-form-text">
		    <label class="layui-form-label">起止时间</label>
		    <div class="layui-input-block joinDatePicker">
		       <input type="text" class="layui-input" name="joinDate" autocomplete="off" lay-verify="required" placeholder="请选择起止时间" id="joinDate">
		    </div>
		  </div>
		  <div class="layui-form-item layui-form-text">
		    <label class="layui-form-label">公告</label>
		    <div class="layui-input-block">
		      <textarea name="notice" required  lay-verify="required" placeholder="请输入内容" class="layui-textarea"></textarea>
		    </div>
		  </div>
		  <div class="layui-form-item">
		    <div class="layui-input-block">
		      <button class="layui-btn" lay-submit lay-filter="formDemo">立即提交</button>
		      <button type="reset" class="layui-btn layui-btn-primary">重置</button>
		    </div>
		  </div>
		</form>
		</div>
	</body>
	<script>
		var member = JSON.parse(sessionStorage.getItem('member'));
		var editContent;
		$('#projectName').val(member.memberExt.projectName);
		
		layui.use('form', function(){
		  var form = layui.form;
		  
		  //监听提交
		  form.on('submit(formDemo)', function(data){
		  	var content = layui.layedit.getContent(editContent);
		  	var submitInfo = JSON.stringify(data.field);
		  	submitInfo.description = content;
		    layer.msg(submitInfo);
		    return false;
		  });
		});
		
		layui.use('laydate', function(){
		  var laydate = layui.laydate;
		  
		  //执行一个laydate实例
		laydate.render({
		    elem: '#joinDate', //指定元素,
		    range:','
		  });
		});
		
		//富文本编辑器
		layui.use('layedit', function(){
		  var layedit = layui.layedit;
		  layedit.set({
		  uploadImage: {
		    url: apiUrl+'/client/api/file/upload'
		  }
		});
		  editContent = layedit.build('content',{
		  	height:180
		  });
		});
		

		
		
		layui.use('upload', function(){
		  var upload = layui.upload;
		   
		  //执行实例
		  var uploadInst = upload.render({
		    elem: '#uploadFile' //绑定元素
		    ,url: apiUrl+'/client/api/file/upload'
		    ,accept: 'file' //允许上传的文件类型
		    ,size: 4096 //最大允许上传的文件大小,
		    ,multiple:true
		    ,before: function(obj){
		      //预读本地文件示例，不支持ie8
		      obj.preview(function(index, file, result){
		      	
		      });
		    }
		    ,done: function(res){
		      //上传完毕回调
		    }
		    ,error: function(){
		      //请求异常回调
		    }
		  });
		});
	</script>
</html>
